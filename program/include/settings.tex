\documentclass[a4paper,12pt,twoside,openright,final]{book}
\usepackage{cmap}                           % Поддержка поиска русских слов в PDF (pdflatex)
\usepackage[utf8]{inputenc}                 % Включаем поддержку UTF8
\usepackage[T2A]{fontenc}                   % Поддержка кириллицы в ЛаТеХ
\usepackage[english,russian]{babel}         % Включаем пакет для поддержки русского и английского языка с переносами.

\usepackage{amsmath}                        % Математическая библиотека
\usepackage{amsfonts}                       % Математическая библиотека: различные стили начертания формул (прямые, курсивы и т.п.).
\usepackage{amssymb}                        % Пакет amsfonts + несколько сотен дополнительных математических символов
\usepackage{amsthm}                         % Окружения "теорема", "лемма", и т.п.
\usepackage{amscd}                          % Поддержка коммутативных диаграмм
\usepackage{mathrsfs}                       % Математическая библиотека
\usepackage{mathtext}                       % Математическая библиотека
\usepackage{latexsym}                       % Математическая библиотека

\usepackage{hyperref}                       % Гиперссылки в электронной версии
\usepackage{vmargin}                        %
\usepackage{indentfirst}                    % Делать отступ в начале параграфа
\usepackage{enumerate}                      % Создание и автоматическая нумерация списков
\usepackage{tabularx}                       % Продвинутые таблицы
\usepackage{floatrow}                       % Продвинутое управление плавающими объектами
\usepackage{cite}                           % "Умные" библиографические ссылки (сортировка и сжатие)
\usepackage{multirow}                       % Возможность объединять строки в таблицах
\usepackage{showkeys}                       % Раскомментируйте, чтобы в документе были видны ссылки на литературу, рисунки и таблицы
\usepackage{tocvsec2}                       % Можно менять уровень вложенности в оглавлении

%\setpapersize{A4}
%\setmarginsrb{2cm}{1.5cm}{1cm}{1.5cm}{0pt}{0mm}{0pt}{13mm}

\setcounter{secnumdepth}{0}

\sloppy                                     % Борьба с залезанием строк на поля
\usepackage{nameref}                        % Ссылки на разделы

\usepackage{color}
\usepackage{framed}
\usepackage{listings}
\usepackage[pdftex]{graphicx}

% \usepackage{geometry}
%  \geometry{
%  a4paper,
%  total={170mm,257mm},
%  left=40mm,
%  top=40mm,
%  }

% \usepackage[a4paper, total={6in, 8in}]{geometry}

\lstset{
  language=VHDL,
  numbers=left,
  firstnumber=0,
  backgroundcolor=\color{gray!10},
  inputencoding=utf8,
  extendedchars=false,
  keepspaces=true,
  % extendedchars=true,
  breaklines=true,
  commentstyle=\color{green!60!black}
  % texcl=true
}

\usepackage{tikz}
\usetikzlibrary{arrows,calc,shapes.gates.logic.US}

\makeatletter
\def\lst@PlaceNumber{\ifnum\value{lstnumber}=0\else
  \llap{\normalfont\lst@numberstyle{\thelstnumber}\kern\lst@numbersep}\fi}
\makeatother

\usepackage{float}                          % Управление "плавающими" объектами
\floatstyle{plain} % optionally change the style of the new float
\newfloat{Code}{H}{myc}

\tikzstyle{expr} = [draw, fill=yellow!20, dotted, rectangle, minimum size=2em]

\tikzstyle{process} = [draw, fill=green!20, rectangle, minimum size=2cm, text width=2cm, align=center]

\newcommand\exsect[1]{\textbf{\textit{\underline{#1}}}}